### work log
- Bulk operations
  - 数据表中记录 一对多，比如在打包区中，
```
    /**
     * 批量设置
     * @param $sectionId
     * @param $packZoneId
     * @return bool|Error
     */
	public static function batchSetPackZone($sectionId, $packZoneId) {
        if (!Location::updatePackZone($sectionId, $packZoneId)) {
            return new Error('库位设置打包区失败！');
        }

        return true;
    }

    /**
     * @param $sectionId
     * @param $zoneId
     * @return bool
     */
    public static function updatePackZone($sectionId, $zoneId) {
        $attributes = [
            'pack_zone_id' => $zoneId,
            'update_time' => static::expressionNow(),
        ];

        $condition = [
            'section_id' => $sectionId,
        ];

        return static::updateAll($attributes, $condition) > 0;
    }
```
  - 数据中单条数据改变 ,纯粹是多条记录。比如说：批量审核功能，批量设置MPQ
  - 该方式适合单个字段的批量操作
```
    	/**
    	 * 批量设置MPQ
    	 * @param array $items ['productId1'=>'quantity','productId2'=>'quantity',....]
    	 */
    	public static function batchSetMpq($items){
    		$ids = array_keys($items);
    
    		$count =  Product::find()->where(['in','id',$ids])->count();
    		if(intval($count) != count($items)){
    			return new Error('产品记录不存在');
    		}
    
    		foreach($items as $quantity){
    			if (intval($quantity) <= 0) {
    				return new Error('最小包装量必须大于等于1');
    			}
    		}
    
    		if (!empty($items) && Error::isError(Product::batchSetMpq($items))) {
    			return new Error('批量设置产品最小包装量失败');
    		}
    
    		return true;
    	}

       /**
         * 批量设置ABC分类
         * @param array   $items ['id1'=>'A1', 'id2'=>'B2', ...]
         */
        public static function batchSetAbc($items) {
            $data = [];
            foreach ($items as $id => $abc) {
                $data[intval($id)] = strtoupper($abc);
            }
            $items = $data;
    
            $table = static::tableName();
            $db = static::getDb();
            $sql = "UPDATE {$table} SET abc = CASE id ";
            foreach ($items as $id => $abc) {
                $sql .= sprintf("WHEN %d THEN '%s' ", $id, $abc);
            }
    
            $ids = implode(',', array_keys($items));
            $sql .= "END WHERE id IN ($ids)";
    
            $command = $db->createCommand($sql);
            try {
                $command->execute();
                return true;
            } catch (\Exception $e) {
                return new Error($e->getMessage());
            }
        }
    }
```
